{"version":3,"file":"mcbr-embed-sdk.umd.js","sources":["../src/embed.ts","../src/ui/modal.ts","../src/sdk.ts","../src/index.ts"],"sourcesContent":["import {\n  WebEmbedOptions as WebEmbedOptions,\n  EventHandler,\n  HostToIframeEvents,\n  IframeToHostEvents,\n} from \"./types\";\n\ntype ResolvedOptions = {\n  container: HTMLElement;\n  url: string;\n  origin: string; // '*' or a specific origin\n  width: string; // normalized\n  height: string; // normalized\n  sandbox: string;\n  allow: string;\n  params?: Record<string, string | number | boolean | undefined | null>;\n};\n\nfunction normalizeSize(\n  v: string | number | undefined,\n  fallback: string\n): string {\n  if (v === undefined || v === null) return fallback;\n  return typeof v === \"number\" ? `${v}px` : v;\n}\n\nfunction resolveContainer(elOrSelector: HTMLElement | string): HTMLElement {\n  if (typeof elOrSelector !== \"string\") return elOrSelector;\n  const el = document.querySelector(elOrSelector);\n  if (!el) throw new Error(`Not found container: ${elOrSelector}`);\n  return el as HTMLElement;\n}\n\nfunction deriveOriginFromUrl(url: string): string | undefined {\n  try {\n    const u = new URL(url, window.location.href);\n    return u.origin;\n  } catch {\n    return undefined;\n  }\n}\n\nexport class WebEmbed {\n  #opts: ResolvedOptions;\n  #iframe?: HTMLIFrameElement;\n  #onEvent?: EventHandler;\n  #boundListener: (e: MessageEvent) => void;\n\n  constructor(opts: WebEmbedOptions) {\n    const origin = opts.origin ?? deriveOriginFromUrl(opts.url) ?? \"*\";\n    this.#opts = {\n      container: resolveContainer(opts.container),\n      url: opts.url,\n      origin,\n      width: normalizeSize(opts.width, \"100%\"),\n      height: normalizeSize(opts.height, \"600px\"),\n      sandbox:\n        opts.sandbox ??\n        \"allow-scripts allow-same-origin allow-forms allow-popups allow-modals\",\n      allow: opts.allow ?? \"clipboard-write; fullscreen; microphone; camera\",\n      params: opts.params\n    };\n\n    this.#boundListener = (e: MessageEvent) => this.#handleMessage(e);\n  }\n\n  mount() {\n    if (this.#iframe) return this;\n    const { container, url, width, height, sandbox, allow, params } =\n      this.#opts;\n\n    const src = this.#buildUrl(url, params);\n    const iframe = document.createElement(\"iframe\");\n    iframe.src = src;\n    iframe.width = \"0\"; // managed by style\n    iframe.height = \"0\";\n    iframe.style.width = width;\n    iframe.style.height = height;\n    iframe.style.border = \"0\";\n    iframe.style.display = \"block\";\n    if (sandbox) iframe.setAttribute(\"sandbox\", sandbox);\n    if (allow) iframe.setAttribute(\"allow\", allow);\n    container.appendChild(iframe);\n\n    this.#iframe = iframe;\n    window.addEventListener(\"message\", this.#boundListener);\n    return this;\n  }\n\n  unmount() {\n    if (!this.#iframe) return this;\n    window.removeEventListener(\"message\", this.#boundListener);\n    this.#iframe.remove();\n    this.#iframe = undefined;\n    return this;\n  }\n\n  onEvent(handler: EventHandler) {\n    this.#onEvent = handler;\n    return this;\n  }\n\n  send(event: HostToIframeEvents) {\n    if (!this.#iframe || !this.#iframe.contentWindow) return false;\n    const targetOrigin = this.#opts.origin || \"*\";\n    this.#iframe.contentWindow.postMessage(event, targetOrigin);\n    return true;\n  }\n\n  setSize(width?: string | number, height?: string | number) {\n    if (!this.#iframe) return this;\n    this.#iframe.style.width = normalizeSize(width, this.#opts.width);\n    this.#iframe.style.height = normalizeSize(height, this.#opts.height);\n    return this;\n  }\n\n  get iframe(): HTMLIFrameElement | undefined {\n    return this.#iframe;\n  }\n\n  #buildUrl(url: string, params?: Record<string, any>) {\n    if (!params) return url;\n    const u = new URL(url, window.location.href);\n    Object.entries(params).forEach(([k, v]) => {\n      if (v === undefined || v === null) return;\n      u.searchParams.set(k, String(v));\n    });\n    return u.toString();\n  }\n\n  #handleMessage(e: MessageEvent) {\n    const { origin } = this.#opts;\n    if (origin !== \"*\" && e.origin !== origin) return;\n\n    const data = e.data as IframeToHostEvents | undefined;\n    if (!data || typeof data !== \"object\" || !(\"type\" in data)) return;\n\n    this.#onEvent?.(data as IframeToHostEvents);\n  }\n}\n","export type ModalOptions = {\n  width?: string;\n  height?: string;\n  maxWidth?: string;\n  maxHeight?: string;\n  zIndex?: number;\n  backdropOpacity?: number;\n  closeOnBackdrop?: boolean;\n  closeOnEscape?: boolean;\n  showCloseButton?: boolean;\n  containerClass?: string;\n  backdropClass?: string;\n};\n\nexport class Modal {\n  private backdrop!: HTMLDivElement;\n  private container!: HTMLDivElement;\n  private closeBtn?: HTMLButtonElement;\n\n  private isOpenFlag = false;\n  private opts: Required<ModalOptions>;\n\n  private keydownHandler?: (e: KeyboardEvent) => void;\n  private backdropClickHandler?: (e: MouseEvent) => void;\n\n  constructor(options: ModalOptions = {}) {\n    this.opts = {\n      width: options.width ?? \"90vw\",\n      height: options.height ?? \"90vh\",\n      maxWidth: options.maxWidth ?? \"1200px\",\n      maxHeight: options.maxHeight ?? \"800px\",\n      zIndex: options.zIndex ?? 9999,\n      backdropOpacity: options.backdropOpacity ?? 0.5,\n      closeOnBackdrop: options.closeOnBackdrop ?? true,\n      closeOnEscape: options.closeOnEscape ?? true,\n      showCloseButton: options.showCloseButton ?? true,\n      containerClass: options.containerClass ?? \"\",\n      backdropClass: options.backdropClass ?? \"\",\n    };\n\n    this.create();\n  }\n\n  private create() {\n    // Backdrop\n    this.backdrop = document.createElement(\"div\");\n    this.backdrop.style.cssText = `\n      position: fixed;\n      inset: 0;\n      width: 100vw;\n      height: 100vh;\n      background-color: rgba(0, 0, 0, ${this.opts.backdropOpacity});\n      z-index: ${this.opts.zIndex};\n      display: none;\n      justify-content: center;\n      align-items: center;\n    `;\n    if (this.opts.backdropClass) {\n      this.backdrop.className = this.opts.backdropClass;\n    }\n\n    // Container\n    this.container = document.createElement(\"div\");\n    this.container.style.cssText = `\n      position: relative;\n      width: ${this.opts.width};\n      height: ${this.opts.height};\n      max-width: ${this.opts.maxWidth};\n      max-height: ${this.opts.maxHeight};\n      background-color: white;\n      border-radius: 8px;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\n      overflow: hidden;\n    `;\n    if (this.opts.containerClass) {\n      this.container.className = this.opts.containerClass;\n    }\n    this.container.setAttribute(\"role\", \"dialog\");\n    this.container.setAttribute(\"aria-modal\", \"true\");\n\n    // Close button\n    if (this.opts.showCloseButton) {\n      this.closeBtn = document.createElement(\"button\");\n      this.closeBtn.type = \"button\";\n      this.closeBtn.innerHTML = \"âœ•\";\n      this.closeBtn.style.cssText = `\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        width: 30px;\n        height: 30px;\n        border: none;\n        background-color: rgba(0, 0, 0, 0.1);\n        color: #666;\n        font-size: 18px;\n        font-weight: bold;\n        cursor: pointer;\n        border-radius: 50%;\n        z-index: ${this.opts.zIndex + 2};\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      `;\n      this.closeBtn.addEventListener(\"click\", () => this.close());\n      this.closeBtn.addEventListener(\"mouseenter\", () => {\n        if (this.closeBtn)\n          this.closeBtn.style.backgroundColor = \"rgba(0, 0, 0, 0.2)\";\n      });\n      this.closeBtn.addEventListener(\"mouseleave\", () => {\n        if (this.closeBtn)\n          this.closeBtn.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n      });\n      this.container.appendChild(this.closeBtn);\n    }\n\n    // Events\n    if (this.opts.closeOnBackdrop) {\n      this.backdropClickHandler = (e: MouseEvent) => {\n        if (e.target === this.backdrop) this.close();\n      };\n      this.backdrop.addEventListener(\"click\", this.backdropClickHandler);\n    }\n\n    if (this.opts.closeOnEscape) {\n      this.keydownHandler = (e: KeyboardEvent) => {\n        if (e.key === \"Escape\" && this.isOpenFlag) this.close();\n      };\n      document.addEventListener(\"keydown\", this.keydownHandler);\n    }\n\n    this.backdrop.appendChild(this.container);\n    document.body.appendChild(this.backdrop);\n  }\n\n  getContainer(): HTMLElement {\n    return this.container;\n  }\n\n  open() {\n    if (this.isOpenFlag) return;\n    this.isOpenFlag = true;\n    this.backdrop.style.display = \"flex\";\n    // Prevent background scroll\n    document.body.style.overflow = \"hidden\";\n  }\n\n  close() {\n    if (!this.isOpenFlag) return;\n    this.isOpenFlag = false;\n    this.backdrop.style.display = \"none\";\n    // Restore scroll\n    document.body.style.overflow = \"\";\n  }\n\n  toggle() {\n    this.isOpenFlag ? this.close() : this.open();\n  }\n\n  isOpen(): boolean {\n    return this.isOpenFlag;\n  }\n\n  destroy() {\n    this.close();\n    if (this.backdropClickHandler) {\n      this.backdrop.removeEventListener(\"click\", this.backdropClickHandler);\n    }\n    if (this.keydownHandler) {\n      document.removeEventListener(\"keydown\", this.keydownHandler);\n    }\n    this.backdrop.remove();\n  }\n}\n","import { WebEmbed } from \"./embed\";\nimport { Modal } from \"./ui/modal\";\n\nexport class MCRSDK {\n  instance!: WebEmbed;\n  private modal: Modal;\n\n  private clientId: string;\n  private email: string;\n  private firstName: string;\n  private lastName: string;\n  private theme: any;\n\n  constructor({\n    clientId,\n    email,\n    firstName,\n    lastName,\n    theme,\n  }: {\n    clientId: string;\n    email: string;\n    firstName: string;\n    lastName: string;\n    theme?: any;\n  }) {\n    this.modal = new Modal({\n      width: \"90vw\",\n      height: \"90vh\",\n      maxWidth: \"1200px\",\n      maxHeight: \"800px\",\n      closeOnBackdrop: true,\n      closeOnEscape: true,\n      showCloseButton: true,\n      zIndex: 9999,\n    });\n\n    const url = \"https://staging.mcr-staging.xyz\";\n    // https://staging.mcr-staging.xyz\n\n    const origin = new URL(url).origin;\n\n    this.instance = new WebEmbed({\n      container: this.modal.getContainer(),\n      url,\n      origin,\n      width: \"100%\",\n      height: \"100%\",\n      clientId,\n    });\n\n    this.clientId = clientId;\n    this.email = email;\n    this.firstName = firstName;\n    this.lastName = lastName;\n    this.theme = theme;\n  }\n\n  open() {\n    if (this.modal.isOpen()) return;\n    this.modal.open();\n    if (!this.instance.iframe) {\n      this.instance.mount();\n    }\n  }\n\n  close() {\n    if (!this.modal.isOpen()) return;\n    this.modal.close();\n  }\n\n  init(frameUrl?: string, origin?: string) {\n    this.instance?.unmount();\n    this.instance = new WebEmbed({\n      container: this.modal.getContainer(),\n      url: frameUrl || \"https://staging.mcr-staging.xyz\",\n      origin:\n        origin || new URL(frameUrl || \"https://staging.mcr-staging.xyz\").origin,\n      width: \"100%\",\n      height: \"100%\",\n      clientId: \"\",\n    });\n    if (this.modal.isOpen()) {\n      this.instance.mount();\n    }\n  }\n\n  auth() {\n    if (this.theme) {\n      this.instance.send({\n        type: \"host:theme\",\n        payload: { theme: this.theme },\n      });\n    }\n\n    this.instance.send({\n      type: \"host:partner-auth\",\n      payload: {\n        email: this.email,\n        firstName: this.firstName,\n        lastName: this.lastName,\n        clientId: this.clientId,\n      },\n    });\n  }\n\n  setTheme(theme: \"light\" | \"dark\") {\n    this.instance.send({\n      type: \"host:theme\",\n      payload: { theme },\n    });\n  }\n\n  onEvent(handler: (event: any) => void) {\n    this.instance.onEvent(handler);\n  }\n\n  isModalOpen(): boolean {\n    return this.modal.isOpen();\n  }\n\n  toggle() {\n    if (this.modal.isOpen()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  destroy() {\n    this.close();\n    this.instance?.unmount();\n    this.modal.destroy();\n  }\n}\n","import { WebEmbed } from \"./embed\";\nimport { MCRSDK } from \"./sdk\";\nexport { WebEmbed };\nexport type {\n  WebEmbedOptions,\n  HostToIframeEvents,\n  IframeToHostEvents,\n  EventHandler,\n} from \"./types\";\n\ndeclare global {\n  interface Window {\n    McbrEmbedSDK?: { WebEmbed: typeof WebEmbed };\n    MCRSDK?: typeof MCRSDK;\n  }\n}\n\ntry {\n  if (typeof window !== \"undefined\") {\n    window.McbrEmbedSDK = { WebEmbed };\n    window.MCRSDK = MCRSDK;\n  }\n} catch {}\n"],"names":["normalizeSize","v","fallback","resolveContainer","elOrSelector","el","deriveOriginFromUrl","url","WebEmbed","opts","__privateAdd","_WebEmbed_instances","_opts","_iframe","_onEvent","_boundListener","origin","__privateSet","e","__privateMethod","handleMessage_fn","__privateGet","container","width","height","sandbox","allow","params","src","buildUrl_fn","iframe","handler","event","targetOrigin","u","k","data","_a","Modal","options","__publicField","MCRSDK","clientId","email","firstName","lastName","theme","frameUrl"],"mappings":"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"}